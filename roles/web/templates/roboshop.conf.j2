location /images/ {
  expires 5s;
  root   /usr/share/nginx/html;
  try_files $uri /images/placeholder.jpg;
}

location /api/catalogue/ {
  proxy_http_version 1.1;
  proxy_pass http://{{CATALOGUE_HOST}}:8080/;
  proxy_set_header Connection "";
  proxy_set_header Host $host;
}

location /api/user/ {
  proxy_http_version 1.1;
  proxy_pass http://{{USER_HOST}}:8080/;
  proxy_set_header Connection "";
  proxy_set_header Host $host;
}

location /api/cart/ {
  proxy_http_version 1.1;
  proxy_pass http://{{CART_HOST}}:8080/;
  proxy_set_header Connection "";
  proxy_set_header Host $host;
}

location /api/shipping/ {
  proxy_http_version 1.1;
  proxy_pass http://{{SHIPPING_HOST}}:8080/;
  proxy_set_header Connection "";
  proxy_set_header Host $host;
}

location /api/payment/ {
  proxy_http_version 1.1;
  proxy_pass http://{{PAYMENT_HOST}}:8080/;
  proxy_set_header Connection "";
  proxy_set_header Host $host;
}

location /health {
  stub_status on;
  access_log off;
}
